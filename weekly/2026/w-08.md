# Weekly Log 08: From Friction to Form

> 17 Feb 2026 – 25 Feb 2026

## Overview

This week was about resolving design friction and letting two long-running
threads settle into stable shape. I pushed the **currency conversion work**
through a series of architectural hurdles until the model cohered end-to-end,
while also bringing the **dummy hops follow-up** to functional completion on the
UX side. The common theme across both efforts was enforcing correctness through
structure, not convention.

## Highlights

### Currency Conversion: Letting the Shape Emerge

- Worked through architectural hurdles around how to pass `CurrencyConversion`
  cleanly during `InvoiceRequest` creation and handling.
- Identified and resolved a key type-level issue by simplifying ownership and
  avoiding unnecessary complexity in the type system.
- Introduced a structurally enforced currency validation step when responding to
  invoice requests, ensuring correctness checks cannot be skipped.
- Stepped back to evaluate implications for **static invoices**, identifying
  potential issues with long-lived invoices and conversion-rate drift, and
  initiating discussion with collaborators to explore the right path forward.
- By the end of the week, the currency approach reads as a single, coherent
  system rather than a collection of special cases.  
  ([Currency work][CurrencyCommits])

### Dummy Hops: Closing the Loop

- Returned to the dummy hops follow-up after time away and resolved two
  previously blocking test failures by revisiting assumptions with fresh eyes.
- Fixed missing CLTV accounting and addressed a subtle blind spot in the dummy
  hops implementation.
- Completed the core UX work for dummy hops by exposing **dummy skimmed fees**
  through `PaymentClaimable` and `PaymentClaimed` events.
- With the main functionality in place, the remaining work is focused on
  cleanup, documentation, and expanding test coverage.  
  ([Dummy hops follow-up][DummyHopsCommits])

## Reflections

This week reinforced a familiar pattern: progress accelerates once the right
constraints are in place.

In both currency conversion and dummy hops, the turning points came from
accepting friction as a signal — not something to work around, but something to
listen to. Letting go of clever but brittle paths made room for designs that are
simpler, safer, and easier to reason about.

By the end of the week, both threads feel grounded. The systems hold, not
because they are elegant on paper, but because their invariants are enforced by
shape.

A satisfying convergence.

[CurrencyCommits]: https://github.com/shaavan/rust-lightning/commits/currency-48
[DummyHopsCommits]:
  https://github.com/shaavan/rust-lightning/commits/dummy-follow-04
