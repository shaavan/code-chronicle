# Log 284: Offer Not Found

> 08 Dec 2025

## What I Worked On

- [Worked] on implementing invoice handling in the payer flow

## Reflections

After wrapping up the first stage of the side quest, I returned to the main
storyline: implementing **invoice handling logic** on the payer side of the
recurrence flow.

Things started smoothly, until I ran into a major wall.

In LDK’s current flow, creating successive invoice requests requires access to
the _original offer_. My initial plan was simple: when we receive the primary
invoice, we’d just **clone the offer** into the active recurrence session’s
memory. Easy, right?

The catch (because of course there’s one):  
Invoices don’t actually contain the full offer. They only include its fields —
not a full, serializable `Offer` object.

That left me with two possible approaches:

1. Modify `Bolt12Invoice` to carry the full `Offer`
2. Create a `pay_from_offer_contents`-style flow that builds invoice requests
   directly from `OfferContents`

I tried the first route today — and quickly discovered it’s _non-trivial at
best_ and possibly not even feasible within the current structure.

So tomorrow, I’ll pivot to the second approach, and I’m optimistic it’ll lead to
a cleaner, more realistic solution. The main quest continues.

[Worked]: https://github.com/shaavan/rust-lightning/commits/recurrence-22
