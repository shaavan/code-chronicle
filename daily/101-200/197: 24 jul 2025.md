# Log 197: Pieces and Patterns

> 24 July 2025

## What I Worked On:

- [Updated](https://github.com/lightningdevkit/rust-lightning/pull/3246#issuecomment-3113189198)
  the **No Blinded Path Offer** PR to align with latest async changes
- [Addressed](https://github.com/shaavan/rust-lightning/commits/currency-19)
  mentor's feedback on the Event Model

## Reflections:

After wrapping up and submitting the quarterly report, I dove straight back into
code — and it felt like returning home mid-conversation.

First up: the No Blinded Path Offer. With recent merges like
[`ReceiveKey`](https://github.com/lightningdevkit/rust-lightning/pull/3917) and
other async-related changes, the branch had quietly broken. Today was about
gathering the fallen pieces and weaving them back together. Not just a rebase —
more like a restoration. Surprisingly, I enjoyed the challenge.

Next came deeper design work. A recent conversation with my mentor shed light on
two key directions:

1. If `OffersMessageFlow` doesn’t handle payments, then how does one respond to
   an `InvoiceReceived` event — a point that naturally leads to actions like
   payment or rejection?
2. What if we let users inject their own `CurrencyConversion` logic, even if the
   flow itself is already parameterized with a trait? That way, the structure
   gracefully supports both async and sync pathways — truly complete.

Today was about translating those insights into code — laying groundwork and
starting to shape the solution.

A day of fragments forming a pattern. And fulfillment in following the thread.
