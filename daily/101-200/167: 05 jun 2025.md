# Log 167: _Fine-Tuning the Past_

> 05 June 2025

## What I Worked On:

- Continued refining the Flow event model implementation
  ([progress here](https://github.com/shaavan/rust-lightning/commits/currency-05))

## Reflections:

Today, I focused on two key improvements we identified in Tuesday’s design
discussion for the Flow event model.

The first was a refinement to Flow’s invoice creation logic: instead of
generating and signing the invoice internally, Flow should now return an
**`InvoiceBuilder`** — allowing the user to review, modify, and sign it
themselves. This change adds flexibility and aligns better with user control.

The second challenge involved supporting **custom amounts** when an offer’s
amount is specified in fiat currency. We needed a clean way to pass that value
upstream during invoice creation — without complicating the flow logic for
Bitcoin-denominated offers.

Both were interesting engineering puzzles, touching architecture, clarity, and
user ergonomics. I’m glad to say they’re both implemented now.

Tomorrow will be a quieter day — focused on cleanup, documentation, and
preparing the branch for its PR debut.

Onward.
