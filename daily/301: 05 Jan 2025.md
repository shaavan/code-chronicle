# Log 301: Push to the Peak!

> 05 Jan 2025

## What I Worked On

- [Finished] the payer flow

## Reflections

Today, I went for a push at the very start of the week and decided to cross the
finish line for the payer flow.

The first challenge was fixing the sticky bug from last time, where introducing
recurrence expiry logic was violating lock order in a single test. After sitting
down to debug it properly, I realized I’d made a minor but critical mistake —
one that the test (thankfully) caught.

In the invoice handling logic implemented earlier, I was attempting to pay the
invoice while still holding the lock on outbound recurrence sessions. After some
careful debugging, a simple `{ ... }` block to tighten the lock scope fixed the
issue.

With that behind me — and momentum on my side — I decided to push through and
finish the **payer flow PoC** today.

There was one final challenge left: incrementing the recurrence tracker counter
after a successful invoice payment. With some planning, clean structure, and a
well-defined flow state, I was able to clear that stage as well.

By the end of the day, I had a fully working payer flow PoC in hand.

There’s still some cleanup to do before opening the PR — but I’m super excited
for tomorrow.

[Finished]: https://github.com/shaavan/rust-lightning/commits/recurrence-32
