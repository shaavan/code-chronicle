# Log 290: One Hundred Lines of Solitude

> 16 Dec 2025

## What I Worked On

- [Introduced] recurrence expiry logic for inbound and outbound active
  recurrence sessions
- Discussed approaches for maintaining a consistent payer signing public key for
  recurrence

## Reflections

Today turned out to be more involved than expected — in a good way.

Before my scheduled discussion with my mentor about maintaining a consistent
payer signing public key, I decided to move forward with implementing
**time-based recurrence expiry** for both outbound and inbound recurrence
sessions.

What I thought would be a contained change ended up requiring a fair amount of
back-and-forth: revisiting earlier assumptions, retconning parts of the payee
flow, correcting and expanding previously introduced data structures, and
tightening documentation along the way.

But after working through those iterations, the logic finally clicked. I ended
the day with about a hundred lines of code — the _good_ kind — and a much
cleaner mental model of how recurrence sessions should age out safely.

Once that was wrapped up, it was time for the discussion. A few interesting
ideas emerged, the most promising being this: since we already control key
derivation and signing internally, we may not need to persist an explicit
signing public key at all. Instead, we could introduce a **deterministic key
derivation scheme** that always yields the same payer signing key for a given
recurrence context.

It’s an elegant idea — and one I’m excited to explore tomorrow.

[Introduced]: https://github.com/shaavan/rust-lightning/commits/recurrence-27
