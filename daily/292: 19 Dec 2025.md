# Log 292: Choosing the Right Layer

> 19 Dec 2025

## What I Worked On

- [Addressed] review suggestions for custom TLVs

## Reflections

After addressing the dummy hops feedback yesterday, today I shifted focus back
to **payment custom TLVs**.

Following Tuesday’s discussion with my mentor and a detailed
[review][SeniorReview] from a senior, I realized an important design issue: for
BOLT12 payments, placing custom TLVs directly in the **Onion Message** (i.e.,
the `InvoiceRequest`) is a much better approach than embedding them in the onion
payment packet, which is constrained by a ~1300-byte size limit.

In light of this, I cleaned up the current branch to retain only the
**BOLT11-related changes**, which still provide clear value on their own.
Meanwhile, I’ll continue working locally on introducing custom TLVs in the Onion
Message path for BOLT12.

A good day of learning, re-scoping, and forward progress.

[Addressed]:
  https://github.com/lightningdevkit/rust-lightning/pull/4263#issuecomment-3673951157
[SeniorReview]:
  https://github.com/lightningdevkit/rust-lightning/pull/4263#pullrequestreview-3579369278
