# Log 212: A significant hurdle

> 16 August 2025

## What I Worked On:

- Rebase [#3964].
- Worked on an important gap in the current [currency] approach.

## Reflections:

After working on the approach for so long, I realized a big hole in the current
design while doing the final clean-ups.  
I was able to successfully introduce the mechanism where, if the amount is being
sent from our side, we can correctly retrieve it from the invoice request or the
underlying offer—even if that requires conversion.

However, what if we **receive an invoice**, where we need to check if the amount
is sufficient, but the invoice request amount is absent and the underlying offer
amount is in currency? That entire flow was in the blind zone.

Today’s work was focused on bringing that into light. Considering this is going
to take a little longer, I took a small break to write this. Now, back to work!

[currency]: https://github.com/shaavan/rust-lightning/commits/currency-29
[#3964]: https://github.com/lightningdevkit/rust-lightning/pull/3964
