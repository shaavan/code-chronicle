# Log 256: The Three-Duck Problem

> 30 Oct 2025

## What I Worked On

- [Progressed] on solving the three major issues in **Payment Dummy Hops**.

## Reflections

Finally — after hours of back-and-forth between thought and action — real
progress.  
Today, I managed to tackle one of the trickiest failures in the Payment Dummy
Hops tests.

The first issue? A maddening one. The authentication logic was _technically
correct_, yet decryption kept failing.  
Turns out, the problem wasn’t the logic at all — it was the **keys**. Once I
fixed that, everything just… worked.  
Classic.

Next came the case involving the _unannounced intro node_. At first, I thought
its unannounced status was the problem. But no — it was because the intro node
was also the **payer**.  
Here’s the heart of it:

- Alice (the payee) sets fees on the Alice–Bob channel she uses to receive
  payments.
- If Bob is the payer and knows the next hop is the receiver, he can safely
  ignore those fees.
- But with dummy hops in play, Bob can’t know how many hops exist — and Alice
  can’t tell him without breaking the whole point of having dummy hops.

So, what started as a bug turned into a **theoretical design problem**.  
And finally, the third issue: one expectedly failed HTLC was being treated as
_non-blinded_, while another identical one was _blinded_. The difference seems
subtle — and I’m still tracing its roots.

This log might sound a little too technical, but maybe that’s the point.  
Call it my own form of **rubber duck debugging** — writing to reason.  
And as I wrote this, a few new ideas began brewing. I can’t wait to test them
out.

[Progressed]: https://github.com/shaavan/rust-lightning/commits/pay-dummy-19
