# Log 175: _Momentum Returns_

> 17 June 2025

## What I Worked On:

- [Updated](https://github.com/shaavan/rust-lightning/commits/dummy-19) the
  Dummy Hops approach
- [Progressed](https://github.com/shaavan/rust-lightning/commits/currency-09) on
  handling Flow event model suggestions
- Discussed further event-model improvements with mentor

## Reflections:

After yesterday’s slow and heavy rhythm, today felt like regaining momentum.

I began with revisiting Dummy Hops. Following our recent discussion, we
recognized that **authenticating every hop** isn’t just simpler and more
maintainable — it also aligns well with upcoming improvements. In particular,
[PR #3845](https://github.com/lightningdevkit/rust-lightning/pull/3845) is
introducing a method of authentication that no longer requires `(hmac, nonce)`
for each hop, saving space and enabling proper masking.

So today’s focus was to **reintroduce the "authenticate every hop" approach**,
paving the way for a clean pivot once #3845 lands.

With that in place, I returned to the Flow event model — continuing the climb
from yesterday. My goal was to **store the `amount_source` directly** within
`InvoiceRequest`, rather than calculating it at the point of use. This not only
improves clarity and interface hygiene, but also prevents runtime errors in edge
cases where the data might be imperfect. It’s one of those changes that looks
small in code, but large in consequence.

To end the day, I had a thorough discussion with my mentor. We explored evolving
the event model further — moving away from an enum-based structure toward
**trait parameterization**. The goal? To make the right API usage **not just
documented, but enforced**. With this shift, users won’t be able to call the
wrong method for a given event — improving both safety and experience.

A day of refinement, clarity, and forward movement.

It feels good to be back in flow.
